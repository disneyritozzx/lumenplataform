const games = [
{
name: "Minecraft",
thumbnail: "images/Minecraft.png",
url: "https://sz-games.github.io/storage3/AWeb",
category: "PC"
},
{
    name: "Minecraft Shooter",
    thumbnail: "images/MINECRAFTSHOOTER.png",
    url: "https://sz-games.github.io/Games8/MINECRAFTSHOOTER",
    category: "PC"
},
{
name: "Minecraft Tower Defense" ,
thumbnail: "https://raw.githubusercontent.com/sz-games/sz-games.github.io/main/cover/mtd.png",
url: "https://sz-games.github.io/Games9/mftd.swf",
category: "PC"
},
{
    name: "Minecraft Tower Defense 2",
    thumbnail: "https://raw.githubusercontent.com/sz-games/sz-games.github.io/main/cover/mtd2.png",
    url: "https://sz-games.github.io/Games9/mftd2.swf",
    category: "PC"
},
{
    name: "FNAF 1",
    thumbnail: "images/fnaf1.jpeg",
    url: "https://sz-games.github.io/Games9/fnaf-1/index.html",
    category: "PC"
},
{
    name: "FNAF 2",
    thumbnail: "images/fnaf2.webp",
    url: "https://sz-games.github.io/Games4//fnaf-2/index.html",
    category: "PC"
},
{
    name: "FNAF 3",
    thumbnail: "images/fnaf3.webp",
    url: "https://sz-games.github.io/Games9/fnaf-3/index.html",
    category: "PC"
},
{
    name: "FNAF 4",
    thumbnail: "images/fnaf4.jpeg",
    url: "https://sz-games.github.io/Games9/fnaf-4/index.html",
    category: "PC"
},
{
    name: "We Become What We Behold",
    thumbnail: "images/67K.avif",
    url: "https://mr-funkinguy.github.io/gfile/wbwwb/index.html    ",
    category: "PC"
},
{
    name: "Bloons td 1",
    thumbnail: "images/btd.png",
    url: "https://sz-games.github.io/Games7/bloonstd.swf    ",
    category: "PC"
},
{
    name: "Bloons td 3",
    thumbnail: "images/btd3.png",
    url: "https://sz-games.github.io/Games7/btd3.swf   ",
    category: "PC"
},
{
    name: "Bloons td 4",
    thumbnail: "images/btd4.png",
    url: "https://sz-games.github.io/Games7/bloonstd4.swf   ",
    category: "PC"
},
{
    name: "Bloons td 5",
    thumbnail: "images/btd5.png",
    url: "https://sz-games.github.io/Games7/btd5.swf",
    category: "PC"
},
/*{ readd soon
    name: "BitLife",
    thumbnail:"images/Bitlife.png",
    url: "https://sz-games.github.io/games/game.html?game=/Games9/bitlife",
    category: "PC"
}*/
{
 name: "SubWay Surfers",
 thumbnail: "images/sub.webp",
 url: "https://dddavit.github.io/subway/",
 category: "PC"
},
{
    name: "Chrome Dino",
    thumbnail: "images/dino.webp",
    url: "https://sz-games.github.io/games/dino",
    category: "PC"
   },
   {
    name: "Slope",
    thumbnail: "images/slope.webp",
    url: "https://sz-games.github.io/games/game.html?game=/slope/",
    category: "PC"
   },
   {
    name: "Slide In the Woods",
    thumbnail: "images/slidein.webp",
    url: "https://sz-games.github.io/games/woods",
    category: "PC"
   },
   {
    name: "Survive!",
    thumbnail: "images/SurMode.webp",
    url: "https://sz-games.github.io/games/zombie",
    category: "PC"
   },
   {
    name: "Flydra",
    thumbnail: "images/hydra.webp",
    url: "https://sz-games.github.io/games/Bin/Game_file/call/hydra",
    category: "PC"
   },
   {
    name: "Cookie Clicker",
    thumbnail: "images/click.png",
    url: "https://mr-funkinguy.github.io/cookieclicker/",
    category: "PC"
   },
   {
    name: "Fluid Animation",
    thumbnail: "images/logo.png",
    url: "https://sz-games.github.io/storage3/1/",
    category: "PC"
   },
   {
    name: "Geometry Dash",
    thumbnail: "images/geo.jpeg",
    url: "https://sz-games.github.io/Games10/geodash/index.html",
    category: "PC"
   },
   {
    name: "Plantas VS Zombies",
    thumbnail: "images/pvz.png",
    url: "https://sz-games.github.io/games/Flash.html?game=/Games11/pvz.swf",
    category: "PC"
   },
   {
    name: "Plantas VS Zombies",
    thumbnail: "images/isaacb.png",
    url: "https://sz-games.github.io/games/Flash.html?game=/Games11/the_binding_of_isaac.swf",
    category: "PC"
   },
   {
    name: "DuckLife 1",
    thumbnail: "images/ducklife.avif",
    url: "https://sz-games.github.io/games/Flash.html?game=/Games11/ducklife1/game.swf",
    category: "PC"
   },
   {
    name: "DuckLife 2",
    thumbnail: "images/logo.webp",
    url: "https://sz-games.github.io/games/Flash.html?game=/Games11/ducklife2/game.swf",
    category: "PC"
   },
   {
    name: "DuckLife 3",
    thumbnail: "images/logoo.webp",
    url: "https://sz-games.github.io/games/Flash.html?game=/Games11/ducklife3/game.swf",
    category: "PC"
   },
   {
    name: "DuckLife 4",
    thumbnail: "images/logo2.png",
    url: "https://sz-games.github.io/games/Flash.html?game=/Games11/ducklife4/game.swf",
    category: "PC"
   },
   {
    name: "Burger And Frights",
    thumbnail: "images/BAFy.jpeg",
    url: "https://sz-games.github.io/Games6/burger-and-frights",
    category: "PC"
   },
   {
    name: "Cut the rope",
    thumbnail: "images/ctr.png",
    url: "https://sz-games.github.io/Games5/ctr",
    category: "PC"
   },
   {
    name: "Cut the rope 2",
    thumbnail: "images/ctr2.png",
    url: "https://sz-games.github.io/Games5/ctr-holiday",
    category: "PC"
   },
   {
    name: "Cute the rope 3",
    thumbnail: "images/tr3.png",
    url: "https://sz-games.github.io/Games5/ctr-tr",
    category: "PC"
   },
   {
    name: "Fruit Ninja",
    thumbnail: "images/tr3.png",
    url: "https://sz-games.github.io/Games5/ctr-tr",
    category: "PC"
   },
  ];
  
  function updateGameCount() {
    const pcGamesCount = games.filter(game => game.category === "PC").length;
    const pcGamesTitle = document.getElementById('pc-games-title');
    pcGamesTitle.innerHTML = `<i class="fas fa-desktop"></i> PC Games - ${pcGamesCount}`;
}

window.addEventListener('load', updateGameCount);


window.addEventListener('load', updateGameCount);


window.addEventListener('load', updateGameCount);

  const cellphoneGameGrid = document.getElementById('cellphone-game-grid');
  const pcGameGrid = document.getElementById('pc-game-grid');
  const previewContainer = document.getElementById('preview-container');
  const previewFrame = document.getElementById('preview-frame');
  const previewTitle = document.getElementById('preview-title');
  const fullscreenBtn = document.getElementById('fullscreen-btn');
  const closeBtn = document.getElementById('close-btn');
  const exitFullscreenBtn = document.getElementById('exit-fullscreen');
  const searchInput = document.getElementById('search-input');
  const searchButton = document.getElementById('search-button');
  const loadingScreen = document.getElementById('loading-screen');

  function createGameThumbnail(game) {
      const thumbnail = document.createElement('div');
      thumbnail.className = 'game-thumbnail slide-in';
      thumbnail.innerHTML = `
          <img src="${game.thumbnail}" alt="${game.name}">
          <p>${game.name}</p>
      `;
      thumbnail.addEventListener('click', () => openGamePreview(game));
      return thumbnail;
  }

  function openGamePreview(game) {
      previewFrame.src = game.url;
      previewTitle.textContent = game.name;
      previewContainer.classList.add('active');
      gsap.fromTo(previewContainer, 
          { scale: 0.8, opacity: 0 },
          { scale: 1, opacity: 1, duration: 0.5, ease: "back.out(1.7)" }
      );
  }

  function closeGamePreview() {
      gsap.to(previewContainer, {
          scale: 0.8,
          opacity: 0,
          duration: 0.5,
          ease: "back.in(1.7)",
          onComplete: () => {
              previewContainer.classList.remove('active');
              previewFrame.src = '';
          }
      });
  }

  function toggleFullscreen() {
      if (!document.fullscreenElement) {
          previewContainer.requestFullscreen().catch(err => {
              alert(`Error attempting to enable fullscreen: ${err.message}`);
          });
      } else {
          document.exitFullscreen();
      }
  }

  function displayGames(filteredGames = games) {
      cellphoneGameGrid.innerHTML = '';
      pcGameGrid.innerHTML = '';
      filteredGames.forEach((game, index) => {
          const thumbnail = createGameThumbnail(game);
          if (game.category === "Cellphone") {
              cellphoneGameGrid.appendChild(thumbnail);
          } else if (game.category === "PC") {
              pcGameGrid.appendChild(thumbnail);
          }
          gsap.from(thumbnail, {
              opacity: 0,
              y: 20,
              duration: 0.5,
              delay: index * 0.1,
              ease: "power3.out"
          });
      });
  }

  function searchGames() {
      const searchTerm = searchInput.value.toLowerCase();
      const filteredGames = games.filter(game => 
          game.name.toLowerCase().includes(searchTerm)
      );
      displayGames(filteredGames);
  }

  searchInput.addEventListener('input', searchGames);

  searchInput.addEventListener('keyup', (e) => {
      if (e.key === 'Enter') {
          searchGames();
      }
  });

  window.addEventListener('load', () => {
      setTimeout(() => {
          loadingScreen.style.display = 'none';
          displayGames();
      }, 1500); // Simulating loading time
  });

  fullscreenBtn.addEventListener('click', toggleFullscreen);
  closeBtn.addEventListener('click', closeGamePreview);
  searchButton.addEventListener('click', searchGames);

  document.addEventListener('fullscreenchange', () => {
      if (document.fullscreenElement) {
          exitFullscreenBtn.style.display = 'block';
          gsap.from(exitFullscreenBtn, { scale: 0, opacity: 0, duration: 0.3, ease: "back.out(1.7)" });
      } else {
          gsap.to(exitFullscreenBtn, {
              scale: 0,
              opacity: 0,
              duration: 0.3,
              ease: "back.in(1.7)",
              onComplete: () => {
                  exitFullscreenBtn.style.display = 'none';
              }
          });
      }
  });

  exitFullscreenBtn.addEventListener('click', () => {
      if (document.fullscreenElement) {
          document.exitFullscreen();
      }
  });

  // Blur effect on scroll
  window.addEventListener('scroll', () => {
      const scrollPosition = window.scrollY;
      const header = document.querySelector('.header-content');
      const blurValue = Math.min(scrollPosition / 75, 10); // Max blur of 10px
      header.style.backdropFilter = `blur(${blurValue}px)`;
  });

  // GSAP animations
  gsap.from(".logo", { opacity: 0, x: -50, duration: 1, ease: "power3.out", delay: 1.5 });
  gsap.from(".search-container", { opacity: 0, x: 50, duration: 1, ease: "power3.out", delay: 1.5 });
  gsap.from(".category-title", { opacity: 0, y: 30, duration: 1, stagger: 0.2, ease: "power3.out", delay: 1.7 });
